<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="pragma" content="no-cache">
    <meta http-equiv="cache-control" content="no-cache">
    <meta http-equiv="expires" content="0">
    <meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
    <meta http-equiv="description" content="This is my page">
    <link rel="stylesheet" href="../admin/bootstrap-3.3.7/css/bootstrap.min.css">
    <script type="text/javascript" src="../admin/bootstrap-3.3.7/js/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="../admin/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../admin/bootstrap-3.3.7/js/bootstrap-paginator.js"></script>
    <title>Title</title>
</head>
<body onload="info()">
<div class="panel panel-info">
    <div class="panel-heading">支教查询</div>
    <div class="panel-body">

        <div class="form-group">
            <input type="text" name="username" style="width: 500px;display: inline" id="un" class="form-control" placeholder="请输入名称" />
            <button class="btn btn-success" onclick="info()">查询</button>
            <!--<button type="button" class="btn btn-success" onclick="location.href='tour/preAdd'">新增</button>-->
        </div>

    </div>
</div>

<table class="table table-bordered table-striped table-hover" id="table">
    <thead>
    <tr class="label-success" >
        <th style="width:5%">序号</th>
        <th style="width:10%">标题</th>
        <th style="width:16%">概述</th>
        <th style="width:4%">演示图片</th>
        <th style="width:3%">发布时间</th>
        <th style="width: 3%">招募时间</th>
        <th style="width: 3%">结束时间</th>
        <th style="width: 3%">查看详情</th>
        <th style="width: 3%">删除</th>
    </tr>
    </thead>
    <tbody id="tb">
    </tbody>
</table>

<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title" id="myModalLabel">
                    详情列表:
                </h4>
            </div>
            <div class="modal-body">
                <span class="text-success">内容简述:</span>
                <span class="text-primary" id="texts"></span><br>
                <span class="text-success">图片详情:</span><br>
                <span class="text-primary" id="images"></span>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                </button>
                <button type="button" onclick="bohui()" class="btn btn-primary">
                    提交按钮
                </button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>

</body>
<script>
    function info() {
        $.ajax({
            type:'post',
            url:'../event/listEvent',
            data:'{"title":"'+$("#un").val()+'"}',
            dataType:'json',
            contentType: 'application/json;charset=utf-8',
            success:function (data) {
                $("#tb").html('');
                var msg = '';
                var tb =$("#tb");
                $.each(data,function (index,user) {
                    msg+="<tr>" +
                        "<td>"+user.id+"</td>" +
                        "<td>"+user.title+"</td>" +
                        "<td>"+user.survery+"</td>" +
                        "<td><img src="+user.pictureshow+" style='width:100px;height: 60px'></td>" +
                        "<td>"+user.issuetime+"</td>" +
                        "<td>"+user.startime+"</td>" +
                        "<td>"+user.endtime+"</td>" +
                        "<td><button data-toggle='modal' data-target='#myModal' class='btn btn-success' onclick='show("+user.id+")'>查看详情</button></td>" +
                        "<td>删除</td></tr>";
                });
                tb.append(msg);
            },
            error:function () {
                alert("error");
            }
        })
    }


    function show(id,noyTr) {
        $.ajax({
            type:'post',
            url:'../event/listEventDetail',
            data:'{"id":"'+id+'"}',
            dataType:'json',
            contentType: 'application/json;charset=utf-8',
            success : function (data) {
                console.log(data);
                $("#texts").html("");
                $("#images").html("");
                var message = "";
                var msgs = "";
                var texts = $("#texts");
                var images = $("#images");
                $.each(data,function (index,event) {
                    if(event.event1 != null){
                        message = event.event1+"<br>";
                    }
                    if(event.event2 != null){
                        message += event.event2+"<br>";
                    }
                    if(event.event3 != null){
                        message += event.event3+"<br>";
                    }
                    if(event.pic1 != null){
                        msgs = "<img src="+event.pic1+" style='width:100px;height: 60px'>";
                    }
                    if(event.pic2 != null){
                        msgs+="<img src="+event.pic2+" style='width:100px;height: 60px'>";
                    }
                    if(event.pic3 != null){
                        msgs += "<img src="+event.pic3+" style='width:100px;height: 60px'>";
                    }
                    if (event.pic4 != null){
                        msgs += "<img src="+event.pic4+" style='width:100px;height: 60px'>";
                    }
                    if (event.pic5 != null){
                        msgs += "<img src="+event.pic5+" style='width:100px;height: 60px'>";
                    }

                   /* msgs = "<img src="+event.pic1+" style='width:100px;height: 60px'><img src="+event.pic2+" style='width:100px;height: 60px'><img src="+event.pic3+" style='width:100px;height: 60px'>";*/
                });
                texts.append(message);
                images.append(msgs);
            }
        })
    }
</script>
</html>